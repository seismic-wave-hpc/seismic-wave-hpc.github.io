---
title: 基本情報と固有コマンド
date: 2025-05-11
draft: true
abstract: "ディレクトリ構成などの基本情報のほか，ジョブ投入などに関係した固有のコマンドを紹介します"
---

Miyabiのアカウントは，申請に応じてグループに紐づいています．以下ではそのグループ名を `${group}` 変数で表します．また，`${user}` が個人ユーザーIDを表すとします．

## ディレクトリ構成

ディレクトリは

- **ホーム** `/home/${user}`
- **ワーク** `/work/${group}/${user}`
- **共有** `/work/${group}/${share}`

です．ホームディレクトリ・ワークディレクトリの基本パーミッションは700で，他の人は読み書きできません．グループ内で共有するファイルは共有ディレクトリをご利用ください．

自分のグループ番号がわからない場合は，`id` コマンドで調べることができます．著者の例だと以下のようになります．

```bash
$ id
uid=49177(k64002) gid=49177(k64002) groups=49177(k64002),21949(gz06),22526(gi23)
```

`gid` のあとの数字に付随した括弧内の文字列がグループ名です．ひとつめは自分地震だけのグループ（`uid`と同一番号），そのあとに表示されるものが申請に紐づいたグループ（上記の場合は `gz06` と `gi23`）です．複数のグループから申し込みをすることで，同じアカウントで複数のグループに所属することがあります．

ホームディレクトリは容量が小さいため，コードの開発や管理はホームディレクトリで，計算はワークディレクトリでやることを推奨します．

::: {.callout-tip}
Miyabiでは他の東大情報基盤センターのシステムとは異なり，ホームディレクトリからもジョブの実行ができるようです．一方で，後述するようにホームディレクトリのファイル数制限が厳しいため，やはりジョブ実行はワークディレクトリから行うことを勧めます．
:::

## 固有コマンド

ジョブの投入関係のコマンドは後述します．

### `qstat`

投入した計算ジョブの状況を確認するためのコマンドです．
その他の使い方として，`--nodeuse` オプションをつけると，現在のシステムの使用状況（混雑状況）を知ることができます．

```bash
$ qstat --nodeuse
SYSTEM: Miyabi-G
QUEUE                                                Ratio Used/Total(Node)
debug-g/interact-g            ***-----------------     15%       7/  48
short-g                       ****----------------     21%       5/  24
regular-g                     ***-----------------     19%     181/ 960
coupler-g                     --------------------      0%       0/ 960
special-g                     --------------------      0%       0/  12

SYSTEM: Miyabi-C
QUEUE                                                Ratio Used/Total(Node)
debug-c/interact-c            --------------------      0%       0/  16
short-c                       --------------------      0%       0/   6
regular-c                     *-------------------      7%      11/ 168
coupler-c                     --------------------      0%       0/ 168

SYSTEM: Prepost
QUEUE                                                Ratio Used/Total(Node)
prepost                       --------------------      0%       0/   1
```

### `show_token`

計算資源の使用状況を確認するコマンドです．同じ情報はWebの利用支援ポータルからも確認できます．

### `show_quota`

ディスクの使用状況を確認するコマンドです．同じ情報はWebの利用支援ポータルからも確認できます．
